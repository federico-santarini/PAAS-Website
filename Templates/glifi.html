{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<style>
  body {
    background-color: #EEEEEE;
  }
</style>

<!-- Render the search field -->
<div class="row">
  <label for="{{ FORM.search.id_for_label }}">
    <h4>Ricerca per parola</h4>
  </label>
</div>
<div class="row">
  {{ FORM.search }}
</div>

<div class="row">
  <div class="col-lg-4">
    <form id="glyph-filter-form" method="get" action="#">
      {% csrf_token %}
      <!-- Render the semantic categories field -->
      <div class="row">
        <h4>{{ FORM.categorieSemantiche.label }}</h4>
      </div>
      <div class="row">
        <div class="col">
          {% for choice in FORM.categorieSemantiche %}
          <div class="round-gray-button">
            {{ choice.tag }}
            <label for="{{ choice.id_for_label }}">
              <h6>{{ choice.choice_label }}</h6>
            </label>
          </div>
          {% endfor %}
        </div>
      </div>
      <!-- Render the grammatical functions field -->
      <div class="row">
        <h4>{{ FORM.funzioniGrammaticali.label }}</h4>
      </div>
      <div class="row">
        <div class="col">
          {% for choice in FORM.funzioniGrammaticali %}
          <div class="round-gray-button">
            {{ choice.tag }}
            <label for="{{ choice.id_for_label }}">
              <h6>{{ choice.choice_label }}</h6>
            </label>
          </div>
          {% endfor %}
        </div>
      </div>
    </form>

    <form id="glyph-downloadall-form" action="{% url 'download_all_images' %}">
      <input class='dowload-button' type="submit" value='{% trans "Scarica tutti i glifi" %}' />
    </form>
  </div> <!-- "col-lg-4" -->

  <div class="col">
    <!-- Glyphs section -->
    <div class="row">
      <div class="col">
          <div class="row">
            {% for glyph in GLYPHS %}
            <div class="col-lg-4 col-6">
              <div class="card">
                <input id="{{ glyph.id }}" type="checkbox" name="selected_images" value="{{ glyph.id }}"
                  style="display: none;" />
                <a href="{{ glyph.glyphFile.url }}" download="{{ glyph.parola }}">
                  <img class="card-img-top" src="{{ glyph.glyphFile.url }}" alt="{{ glyph.parola }}" />
                </a>
              </div>
              {% get_current_language as LANGUAGE_CODE%}
              {% if LANGUAGE_CODE == "it" %}
              <h4 class="glyph-label">{{ glyph.parola }}</h4>
              {% elif LANGUAGE_CODE == "en" %}
              <h4 class="glyph-label">{{ glyph.parola_ENG }}</h4>
              {% endif %}
            </div>
            {% endfor %}
          </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
      </div>
    </div>
  </div> <!-- "col" -->
</div> <!-- row -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.jsdelivr.net/jquery.cookie/1.4.0/jquery.cookie.min.js"></script>



<script>
  // Autosubmit Form #glyph-filter-form

  $(document).ready(function () {
    const form = $('#glyph-filter-form')

    $("input[type='checkbox']", form).on('change', function () {
      form.submit()
    })
  })
</script>

{% endblock %}